\documentclass[12pt, titlepage]{article}

\usepackage{amsmath, mathtools}

\usepackage[round]{natbib}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{colortbl}
\usepackage{xr}
\usepackage{hyperref}
\usepackage{longtable}
\usepackage{xfrac}
\usepackage{tabularx}
\usepackage{float}
\usepackage{siunitx}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage[section]{placeins}
\usepackage{caption}
\usepackage{fullpage}

\hypersetup{
bookmarks=true,     % show bookmarks bar?
colorlinks=true,       % false: boxed links; true: colored links
linkcolor=red,          % color of internal links (change box color with linkbordercolor)
citecolor=blue,      % color of links to bibliography
filecolor=magenta,  % color of file links
urlcolor=cyan          % color of external links
}

\usepackage{array}

\externaldocument{../../SRS/SRS}

\input{../../Comments}
\input{../../Common}

\begin{document}

\title{Module Interface Specification for \progname{}}

\author{\authname}

\date{\today}

\maketitle

\pagenumbering{roman}

\section{Revision History}

\begin{tabularx}{\textwidth}{p{3cm}p{2cm}X}
  \toprule {\bf Date} & {\bf Version} & {\bf Notes} \\
  \midrule
  2025-01-18              & 1.0           & Initial Version       \\
  \bottomrule
\end{tabularx}

\newpage

\section{Symbols, Abbreviations and Acronyms}

See SRS Documentation \href{https://github.com/russellrd/realm/blob/main/docs/SRS-IEEE/SRS.pdf}{here}.

\newpage

\tableofcontents

\newpage

\pagenumbering{arabic}

\section{Introduction}

The following document details the Module Interface Specifications for the mobile AR application, \textit{Realm}. The application is designed to provide users with an interactive and immersive experience of the world of AR. The application will be developed using the Unity game engine and will be compatible with both iOS and Android devices. The MIS will provide a detailed description of the modules that will be implemented in the application on both the client and server sides. The modules are decomposed into the hardware-hiding, behavior-hiding, and software decision modules. The hardware-hiding modules are used to abstract the hardware components of the system. The behavior-hiding modules are used to provide the functional requirements of the system. The software decision modules are used to provide the algorithms and data structures that will be used in the system. \\

Complementary documents include the SRS (System Requirement Specifications) and Module Guide. The full documentation and implementation can be found \href{https://github.com/russellrd/realm}{here}.

\section{Notation}

The following table summarizes the primitive data types used by the \textit{Realm} application.

\begin{center}
  \renewcommand{\arraystretch}{1.2}
  \noindent
  \begin{tabular}{l l p{7.5cm}}
    \toprule
    \textbf{Data Type} & \textbf{Notation} & \textbf{Description}\\
    \midrule
    character & char & a single symbol or digit\\
    string & str & a sequence of characters\\
    integer & $\mathbb{Z}$ & a number without a fractional component in (-$\infty$, $\infty$) \\
    natural number & $\mathbb{N}$ & a number without a fractional component in [1, $\infty$) \\
    real & $\mathbb{R}$ & any number in (-$\infty$, $\infty$)\\
    boolean & $\mathbb{B}$ & \{True, False\} \\
    array & $\Theta$\textbf{[ ]} & Collection of data of type $\Theta$. Fixed size can be mentioned within the brackets.  Example: $\mathbb{R}$\textbf{[ ]}\\
    AR object & $\mathbb{AR}$ & a binary blob containing information to read and view the AR object \\
    \bottomrule
  \end{tabular}
\end{center}

\newpage

\section{Module Decomposition}

The following table is taken directly from the Module Guide document for this project.

\begin{table}[h!]
\centering
\begin{tabular}{p{0.3\textwidth} p{0.6\textwidth}}
\toprule
\textbf{Level 1} & \textbf{Level 2}\\
\midrule

{Hardware-Hiding Module} & Hardware Module\\
\midrule

\multirow{7}{0.3\textwidth}{Behaviour-Hiding Module} & Tutorial Module\\
& Inventory Module\\
& Sub-Realm Module\\
& Touring Module\\
& Tour List Module\\
& Tour Management Module\\
& Settings Module\\
& Help Module\\
& Friends Module\\
& Maps Module\\
& Realm Interface Module\\
& Object Importer Module\\
& Object Placement Module\\
& Object Interaction Module\\
& Object Render Module\\
& Collision Detection Module\\
& Restricted Area Detection Module\\
& Weather Detection Module\\
& Tour Proximity Detection Module\\
& Notifications Module\\
\midrule

\multirow{3}{0.3\textwidth}{Software Decision Module} & REST API Connection Module\\
& Local Database Manager Module\\
& Data Sync Module\\
& Server Database Manager Module\\
& Authentication Module\\
\bottomrule

\end{tabular}
\caption{Module Hierarchy}
\label{TblMH}
\end{table}

\newpage

\section{MIS of Tutorial} \label{Tutorial}

The Tutorial module contains the methods needed to produce an interactive tutorial. Once a feature has been demonstrated, a user can choose to move on to the next feature. Once all the features have been shown, the user can quit the tutorial immediately or stay in the sandbox.

\subsection{Module}

TutorialModule

\subsection{Uses}

Realm Interface Module\\
Maps Module\\
Object Importer Module\\
Object Placement Module\\
Object Interaction Module\\
REST API Connection Module

\subsection{Syntax}

\subsubsection{Exported Constants}

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{2cm} p{4cm} p{4cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
Full & - & - & - \\
One & $\mathbb{Z}, string$ & - & - \\
Close & $string$ & - & - \\
Reset & - & - & - \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

page: $\mathbb{Z}$\\
isLoaded: $\mathbb{B}$\\
isNextAvailable: $\mathbb{B}$\\
isLast: $\mathbb{B}$

\subsubsection{Environment Variables}

N/A

\subsubsection{Assumptions}

N/A

\subsubsection{Access Routine Semantics}

\noindent Full():
\begin{itemize}
\item transition: (isNextAvailable == True $\wedge$ button.pressed == True $\wedge$ isLast == True) $\Rightarrow$ Close("Realm Interface")
\item output: N/A
\item exception: N/A
\end{itemize}

\noindent One(page, prev):
\begin{itemize}
\item transition: (isNextAvailable == True $\wedge$ button.pressed == True) $\Rightarrow$ Close(prev)
\item output: N/A
\item exception: N/A
\end{itemize}

\noindent Close(nav\_screen):
\begin{itemize}
\item transition: button.pressed == True $\Rightarrow$ (Reset(), screen == nav\_screen)
\item output: N/A
\item exception: N/A
\end{itemize}

\noindent Reset():
\begin{itemize}
\item transition: page = 0
\item output: N/A
\item exception: N/A
\end{itemize}

\subsubsection{Local Functions}

N/A

\newpage

\section{MIS of Settings Module} \label{Module_Settings}

\subsection{Module}

Settings Module

\subsection{Uses}

\begin{itemize}
  \item Database/Network Manager Module
  \item Error Manager Module
  \item Authentication Module
\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Constants}

\begin{itemize}
  \item None
\end{itemize}

\subsubsection{Exported Access Programs}

\begin{center}
  \begin{tabular}{p{4cm} p{4cm} p{4cm} p{4cm}}
    \hline
    \textbf{Name}        & \textbf{In}                                   & \textbf{Out}                       & \textbf{Exceptions}     \\
    \hline
    UpdateSettings       & Dictionary of key-value pairs                 & Bool - Success or Fail             & InvalidKeyException     \\
    \hline
    FetchSettings        & -                                             & Dictionary of current settings     & -                       \\
    \hline
    ResetToDefaults      & -                                             & Bool - Success or Fail             & -                       \\
    \hline
    UpdateProfileDetails & Dictionary of profile-related key-value pairs & Bool - Success or Fail             & InvalidKeyException     \\
    \hline
    FetchProfileDetails  & -                                             & Dictionary of profile-related data & -                       \\
    \hline
    ChangePassword       & Old password, new password                    & Bool - Success or Fail             & AuthenticationException \\
    \hline
  \end{tabular}
\end{center}


\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
  \item settings: A dictionary containing user-configurable settings and their current values.
  \item profileDetails: A dictionary storing user profile-related data (e.g., name, avatar, bio).
\end{itemize}

\subsubsection{Environment Variables}

\begin{itemize}
  \item Device Storage: Used to persist settings and profile details.
  \item Encryption Mechanism: Ensures sensitive data like passwords and privacy settings are encrypted during storage and transmission.
\end{itemize}

\subsubsection{Assumptions}

\begin{itemize}
  \item The device has sufficient storage for saving and retrieving settings and profile details.
  \item All keys provided for updates are predefined and valid.
  \item The user is authenticated before accessing this module.
\end{itemize}

\subsubsection{Access Routine Semantics}

\noindent UpdateSettings(newSettings):
\begin{itemize}
  \item \textbf{Transition:} Updates the corresponding entries in the settings dictionary with the provided key-value pairs.
  \item \textbf{Output:} Returns true if all updates succeed, false otherwise.
  \item \textbf{Exception:} Throws InvalidKeyException if an invalid key is provided.
\end{itemize}

\noindent FetchSettings():
\begin{itemize}
  \item \textbf{Output:} Returns the current settings dictionary.
  \item \textbf{Exception:} None
\end{itemize}

\noindent ResetToDefaults():
\begin{itemize}
  \item \textbf{Transition:} Resets all settings in the dictionary to their default values.
  \item \textbf{Output:} Returns true if the reset succeeds, false otherwise.
  \item \textbf{Exception:} None
\end{itemize}

\noindent UpdateProfileDetails(newProfileDetails):
\begin{itemize}
  \item \textbf{Transition:} Updates the corresponding entries in the profileDetails dictionary with the provided key-value pairs.
  \item \textbf{Output:} Returns true if all updates succeed, false otherwise.
  \item \textbf{Exception:} Throws InvalidKeyException if an invalid key is provided.
\end{itemize}

\noindent FetchProfileDetails():
\begin{itemize}
  \item \textbf{Output:} Returns the current profileDetails dictionary.
  \item \textbf{Exception:} None
\end{itemize}

\noindent ChangePassword(oldPassword, newPassword):
\begin{itemize}
  \item \textbf{Transition:} Validates the old password and updates the password to the new one if valid.
  \item \textbf{Output:} Returns true if the password is successfully changed, false otherwise.
  \item \textbf{Exception:} Throws AuthenticationException if the old password is incorrect or the user session is invalid.
\end{itemize}

\subsubsection{Local Functions}

\begin{itemize}
  \item ValidateKey(key): Ensures the provided key is predefined and valid for the settings or profileDetails dictionaries.
  \item EncryptData(data): Applies encryption to sensitive data before storage or transmission.
\end{itemize}


\newpage

\section{MIS of Help Module} \label{Module_Help}

\subsection{Module}

Help Module

\subsection{Uses}

\begin{itemize}
  \item User Interface Manager Module
  \item Content Storage Module
\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Constants}

\begin{itemize}
  \item None
\end{itemize}

\subsubsection{Exported Access Programs}

\begin{center}
  \begin{tabular}{p{3cm} p{4cm} p{4cm} p{5cm}}
    \hline
    \textbf{Name}  & \textbf{In}                     & \textbf{Out}                       & \textbf{Exceptions}         \\
    \hline
    ViewHelpTopics & -                               & List of help topics                & -                           \\
    \hline
    SearchHelp     & Query string                    & Relevant help content              & InvalidQueryException       \\
    \hline
    FetchFAQ       & -                               & List of frequently asked questions & -                           \\
    \hline
    ContactSupport & User message, user contact info & Confirmation of message sent       & MessageDeliveryException    \\
    \hline
    SubmitFeedback & Feedback message                & Bool - Success or Fail             & FeedbackSubmissionException \\
    \hline
  \end{tabular}
\end{center}


\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
  \item helpSections: A collection of predefined help sections, each identified by a unique ID and containing text, images, or links.
  \item searchIndex: An index to facilitate quick searches within help content.
\end{itemize}

\subsubsection{Environment Variables}

\begin{itemize}
  \item Content Storage: Stores the help documentation (e.g., FAQs, guides, tutorials).
  \item Device Network: Used for fetching online help content if local content is not available.
\end{itemize}

\subsubsection{Assumptions}

\begin{itemize}
  \item All help content is preloaded in the Content Storage or accessible via a network connection.
  \item The section identifiers used are valid and correspond to existing help sections.
\end{itemize}

\subsubsection{Access Routine Semantics}

\noindent FetchHelpContent(sectionID):
\begin{itemize}
  \item \textbf{Transition:} None
  \item \textbf{Output:} Returns the help content associated with the given section identifier.
  \item \textbf{Exception:} Throws ContentNotFoundException if the sectionID is invalid or not found.
\end{itemize}

\noindent SearchHelpContent(query):
\begin{itemize}
  \item \textbf{Transition:} None
  \item \textbf{Output:} Returns a list of section identifiers that are relevant to the search query.
  \item \textbf{Exception:} None
\end{itemize}

\noindent NavigateToHelpSection(sectionID):
\begin{itemize}
  \item \textbf{Transition:} Updates the displayed help section in the user interface to the section corresponding to the given identifier.
  \item \textbf{Output:} Returns true if navigation is successful, false otherwise.
  \item \textbf{Exception:} Throws InvalidSectionException if the sectionID is invalid.
\end{itemize}

\subsubsection{Local Functions}

\begin{itemize}
  \item ValidateSectionID(sectionID): Ensures the section identifier is valid and corresponds to an existing help section.
  \item PerformSearch(query): Matches the search query against the searchIndex and returns relevant section identifiers.
\end{itemize}


\newpage

\section{MIS of Friends Module} \label{Module_Friends}

\subsection{Module}

Friends Module

\subsection{Uses}

\begin{itemize}
  \item User Interface Manager Module
  \item Database Manager Module
  \item Notification Module
\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Constants}

\begin{itemize}
  \item None
\end{itemize}

\subsubsection{Exported Access Programs}

\begin{center}
  \begin{tabular}{p{4cm} p{4cm} p{4cm} p{4cm}}
    \hline
    \textbf{Name}       & \textbf{In}              & \textbf{Out}           & \textbf{Exceptions}     \\
    \hline
    AddFriend           & User ID of friend        & Bool - Success or Fail & FriendRequestException  \\
    \hline
    RemoveFriend        & User ID of friend        & Bool - Success or Fail & FriendNotFoundException \\
    \hline
    FetchFriendList     & -                        & List of friends        & -                       \\
    \hline
    AcceptFriendRequest & Request ID               & Bool - Success or Fail & InvalidRequestException \\
    \hline
    RejectFriendRequest & Request ID               & Bool - Success or Fail & InvalidRequestException \\
    \hline
    BlockUser           & User ID of user to block & Bool - Success or Fail & BlockException          \\
    \hline
  \end{tabular}
\end{center}


\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
  \item friendsList: A list of user identifiers representing the user's current friends.
  \item pendingRequests: A list of incoming and outgoing friend requests.
\end{itemize}

\subsubsection{Environment Variables}

\begin{itemize}
  \item Database: Stores the user’s friends and pending requests.
  \item Notification System: Sends notifications for friend requests and updates.
\end{itemize}

\subsubsection{Assumptions}

\begin{itemize}
  \item All user identifiers provided are valid and correspond to registered users.
  \item The database connection is available and operational during module use.
\end{itemize}

\subsubsection{Access Routine Semantics}

\noindent AddFriend(userID):
\begin{itemize}
  \item \textbf{Transition:} Adds the specified user to the friends list if the request is valid and approved.
  \item \textbf{Output:} Returns true if the friend is successfully added, false otherwise.
  \item \textbf{Exception:} Throws UserNotFoundException if the specified userID does not exist.
\end{itemize}

\noindent RemoveFriend(userID):
\begin{itemize}
  \item \textbf{Transition:} Removes the specified user from the friends list.
  \item \textbf{Output:} Returns true if the friend is successfully removed, false otherwise.
  \item \textbf{Exception:} Throws UserNotFoundException if the specified userID does not exist.
\end{itemize}

\noindent FetchFriendsList():
\begin{itemize}
  \item \textbf{Output:} Returns a list of user identifiers representing the user’s current friends.
  \item \textbf{Exception:} None
\end{itemize}

\noindent SendFriendRequest(userID):
\begin{itemize}
  \item \textbf{Transition:} Adds a new friend request to the pendingRequests list.
  \item \textbf{Output:} Returns true if the request is successfully sent, false otherwise.
  \item \textbf{Exception:} Throws UserNotFoundException if the specified userID does not exist.
\end{itemize}

\noindent RespondToFriendRequest(requestID, response):
\begin{itemize}
  \item \textbf{Transition:} Updates the status of the specified friend request (accept or reject).
  \item \textbf{Output:} Returns true if the response is successfully recorded, false otherwise.
  \item \textbf{Exception:} Throws RequestNotFoundException if the specified requestID does not exist.
\end{itemize}

\subsubsection{Local Functions}

\begin{itemize}
  \item ValidateUserID(userID): Ensures the user identifier corresponds to a valid registered user.
  \item NotifyUser(userID, message): Sends a notification to the specified user.
\end{itemize}

\newpage


\section{MIS of Collision Hazard Detection Module} \label{Module_CollisionHazardDetection}

\subsection{Module}

Collision Hazard Detection Module

\subsection{Uses}

\begin{itemize}
  \item AR Object Manager Module
  \item Device Sensors Module (e.g., Camera, LiDAR)
  \item Notification Module
\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Constants}

\begin{itemize}
  \item None
\end{itemize}

\subsubsection{Exported Access Programs}

\begin{center}
  \begin{tabular}{p{4.2cm} p{3cm} p{3cm} p{4cm}}
    \hline
    \textbf{Name}           & \textbf{In}                                  & \textbf{Out}                              & \textbf{Exceptions}            \\
    \hline
    DetectCollision         & User’s current position, AR object positions & Boolean (Collision Detected/Not Detected) & SensorDataUnavailableException \\
    \hline
    FetchHazardDetails      & Collision ID                                 & Hazard details (Type, Severity, Location) & HazardNotFoundException        \\
    \hline
    LogCollisionEvent       & Collision details (Position, Time, Severity) & Bool - Success or Fail                    & LoggingException               \\
    \hline
    ClearHazardAlerts       & -                                            & Bool - Success or Fail                    & AlertClearanceException        \\
    \hline
    UpdateDetectionSettings & Dictionary of detection settings             & Bool - Success or Fail                    & InvalidSettingsException       \\
    \hline
  \end{tabular}
\end{center}


\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
  \item collisionEvents: A log of detected collisions, including timestamps, object data, and resolutions.
\end{itemize}

\subsubsection{Environment Variables}

\begin{itemize}
  \item Device Sensors: Provides real-time data for collision detection (e.g., LiDAR, camera).
  \item Notification System: Sends alerts when collisions are detected.
  \item Storage System: Logs collision events for future analysis.
\end{itemize}

\subsubsection{Assumptions}

\begin{itemize}
  \item Device sensors are operational and capable of providing accurate real-time data.
  \item The system has access to sufficient storage for logging collision events.
  \item All objects in the AR environment are registered and have defined collision boundaries.
\end{itemize}

\subsubsection{Access Routine Semantics}

\noindent DetectCollision(sensorData):
\begin{itemize}
  \item \textbf{Transition:} None
  \item \textbf{Output:} Returns true if a collision is detected based on sensor data, false otherwise.
  \item \textbf{Exception:} Throws SensorUnavailableException if real-time data cannot be accessed.
\end{itemize}

\noindent ResolveCollision(collisionData):
\begin{itemize}
  \item \textbf{Transition:} Attempts to resolve the collision by adjusting object positions or notifying the user.
  \item \textbf{Output:} Returns true if the collision is successfully resolved, false otherwise.
  \item \textbf{Exception:} Throws CollisionNotResolvableException if the collision cannot be resolved.
\end{itemize}

\noindent LogCollisionEvent(eventData):
\begin{itemize}
  \item \textbf{Transition:} Records the collision event in the system log.
  \item \textbf{Output:} Returns true if the event is successfully logged, false otherwise.
  \item \textbf{Exception:} Throws LogWriteException if the log cannot be updated.
\end{itemize}

\subsubsection{Local Functions}

\begin{itemize}
  \item AnalyzeSensorData(sensorData): Processes real-time data to determine if a collision is imminent.
  \item NotifyUserOfCollision(collisionData): Sends an alert to the user about a detected collision.
\end{itemize}

\newpage

\section{MIS of Tour Proximity Detection Module} \label{Module_TourProximityDetection}

\subsection{Module}

Tour Proximity Detection Module

\subsection{Uses}

\begin{itemize}
  \item GPS Module
  \item Notification Module
  \item AR Object Manager Module
\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Constants}

\begin{itemize}
  \item None
\end{itemize}

\subsubsection{Exported Access Programs}

\begin{center}
  \begin{tabular}{p{4cm} p{3cm} p{3cm} p{5cm}}
    \hline
    \textbf{Name}         & \textbf{In}                                        & \textbf{Out}                   & \textbf{Exceptions}              \\
    \hline
    DetectNearbyTours     & User’s current location, registered tour locations & List of tours within proximity & LocationDataUnavailableException \\
    \hline
    NotifyTourProximity   & User’s proximity to a specific tour                & Notification message           & NotificationFailureException     \\
    \hline
    UpdateTourProximity   & Updated user location, updated tour locations      & Bool - Success or Fail         & UpdateFailedException            \\
    \hline
    FetchProximityDetails & User ID, tour ID                                   & Details of proximity data      & DataFetchException               \\
    \hline
  \end{tabular}
\end{center}


\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
  \item proximityEvents: A log of detected proximity events, including timestamps, tour data, and notifications sent.
  \item currentLocation: The user's most recently reported GPS coordinates.
\end{itemize}

\subsubsection{Environment Variables}

\begin{itemize}
  \item GPS System: Provides the user's real-time location.
  \item Notification System: Sends alerts when a user is near a tour location.
  \item Storage System: Logs proximity detection events for future analysis.
\end{itemize}

\subsubsection{Assumptions}

\begin{itemize}
  \item The GPS system is operational and capable of providing accurate location data.
  \item The system has sufficient storage for logging proximity detection events.
  \item All tours in the system have clearly defined geographical boundaries.
\end{itemize}

\subsubsection{Access Routine Semantics}

\noindent DetectNearbyTour(currentLocation):
\begin{itemize}
  \item \textbf{Transition:} None
  \item \textbf{Output:} Returns a list of tours within proximity to the user's current location.
  \item \textbf{Exception:} Throws LocationUnavailableException if GPS data cannot be accessed.
\end{itemize}

\noindent TriggerTourNotification(tourData):
\begin{itemize}
  \item \textbf{Transition:} Sends a notification to the user about the nearby tour.
  \item \textbf{Output:} Returns true if the notification is successfully sent, false otherwise.
  \item \textbf{Exception:} Throws NotificationSendException if the notification fails to send.
\end{itemize}

\noindent LogProximityEvent(eventData):
\begin{itemize}
  \item \textbf{Transition:} Records the proximity event in the system log.
  \item \textbf{Output:} Returns true if the event is successfully logged, false otherwise.
  \item \textbf{Exception:} Throws LogWriteException if the log cannot be updated.
\end{itemize}

\subsubsection{Local Functions}

\begin{itemize}
  \item AnalyzeLocationData(locationData): Processes the current GPS location to identify nearby tours.
  \item NotifyUserOfProximity(tourData): Sends an alert to the user about a detected nearby tour.
\end{itemize}

\newpage

\section{MIS of Notifications Module} \label{Module_Notifications}

\subsection{Module}

Notifications Module

\subsection{Uses}

\begin{itemize}
  \item User Interface Manager Module
  \item Database Manager Module
\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Constants}

\begin{itemize}
  \item None
\end{itemize}

\subsubsection{Exported Access Programs}

\begin{center}
  \begin{tabular}{p{5cm} p{3cm} p{3cm} p{5cm}}
    \hline
    \textbf{Name}              & \textbf{In}                   & \textbf{Out}           & \textbf{Exceptions}           \\
    \hline
    SendNotification           & User ID, notification message & Bool - Success or Fail & NotificationSendException     \\
    \hline
    FetchNotifications         & User ID                       & List of notifications  & DataFetchException            \\
    \hline
    MarkNotificationRead       & Notification ID               & Bool - Success or Fail & NotificationNotFoundException \\
    \hline
    DeleteNotification         & Notification ID               & Bool - Success or Fail & DeleteFailedException         \\
    \hline
    UpdateNotificationSettings & User ID, settings data        & Bool - Success or Fail & InvalidSettingsException      \\
    \hline
  \end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
  \item notifications: A list of notifications associated with each user, including their status (read/unread).
\end{itemize}

\subsubsection{Environment Variables}

\begin{itemize}
  \item Notification System: Handles the actual delivery of notifications to users.
  \item Database: Stores notifications for retrieval and management.
\end{itemize}

\subsubsection{Assumptions}

\begin{itemize}
  \item The notification delivery service is operational and capable of sending notifications in real-time.
  \item All user identifiers and notification identifiers are valid and exist in the database.
\end{itemize}

\subsubsection{Access Routine Semantics}

\noindent SendNotification(notificationData):
\begin{itemize}
  \item \textbf{Transition:} Adds the notification to the database and attempts to deliver it to the specified user.
  \item \textbf{Output:} Returns true if the notification is successfully sent, false otherwise.
  \item \textbf{Exception:} Throws NotificationSendException if the delivery fails.
\end{itemize}

\noindent FetchNotifications(userID):
\begin{itemize}
  \item \textbf{Output:} Returns a list of notifications for the specified user.
  \item \textbf{Exception:} Throws UserNotFoundException if the user ID is not found.
\end{itemize}

\noindent MarkNotificationAsRead(notificationID):
\begin{itemize}
  \item \textbf{Transition:} Updates the status of the specified notification to "read" in the database.
  \item \textbf{Output:} Returns true if the status update is successful, false otherwise.
  \item \textbf{Exception:} Throws NotificationNotFoundException if the notification ID is not found.
\end{itemize}

\noindent DeleteNotification(notificationID):
\begin{itemize}
  \item \textbf{Transition:} Removes the specified notification from the database.
  \item \textbf{Output:} Returns true if the notification is successfully deleted, false otherwise.
  \item \textbf{Exception:} Throws NotificationNotFoundException if the notification ID is not found.
\end{itemize}

\subsubsection{Local Functions}

\begin{itemize}
  \item ValidateNotificationData(notificationData): Ensures the notification data is valid before sending.
  \item NotifyUser(notificationData): Sends the notification to the user using the delivery system.
\end{itemize}

\newpage

\section{MIS of Authentication Module} \label{Module_Authentication}

\subsection{Module}

Authentication Module

\subsection{Uses}

\begin{itemize}
  \item Database Manager Module
  \item Encryption Module
  \item Notification Module (for two-factor authentication)
\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Constants}

\begin{itemize}
  \item None
\end{itemize}

\subsubsection{Exported Access Programs}

\begin{center}
  \begin{tabular}{p{5cm} p{3cm} p{3cm} p{5cm}}
    \hline
    \textbf{Name}              & \textbf{In}                   & \textbf{Out}           & \textbf{Exceptions}           \\
    \hline
    SendNotification           & User ID, notification message & Bool - Success or Fail & NotificationSendException     \\
    \hline
    FetchNotifications         & User ID                       & List of notifications  & DataFetchException            \\
    \hline
    MarkNotificationRead       & Notification ID               & Bool - Success or Fail & NotificationNotFoundException \\
    \hline
    DeleteNotification         & Notification ID               & Bool - Success or Fail & DeleteFailedException         \\
    \hline
    UpdateNotificationSettings & User ID, settings data        & Bool - Success or Fail & InvalidSettingsException      \\
    \hline
  \end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
  \item users: A collection of user data, including credentials, authentication settings, and two-factor status.
  \item activeSessions: A list of currently authenticated user sessions.
\end{itemize}

\subsubsection{Environment Variables}

\begin{itemize}
  \item Database: Stores user credentials and authentication-related data.
  \item Encryption System: Encrypts sensitive user information like passwords.
  \item Notification System: Sends two-factor authentication codes or password reset links.
\end{itemize}

\subsubsection{Assumptions}

\begin{itemize}
  \item All usernames and passwords are stored securely and hashed using industry-standard encryption.
  \item The system has access to a functional notification system for delivering codes and reset links.
  \item Users provide valid inputs during registration and login attempts.
\end{itemize}

\subsubsection{Access Routine Semantics}

\noindent AuthenticateUser(username, password):
\begin{itemize}
  \item \textbf{Transition:} Verifies the username and password against stored credentials.
  \item \textbf{Output:} Returns true if the credentials are valid, false otherwise.
  \item \textbf{Exception:} Throws AuthenticationFailedException if the credentials do not match.
\end{itemize}

\noindent RegisterUser(registrationData):
\begin{itemize}
  \item \textbf{Transition:} Adds a new user to the database with the provided registration data.
  \item \textbf{Output:} Returns true if the registration is successful, false otherwise.
  \item \textbf{Exception:} Throws RegistrationFailedException if the registration fails due to invalid data or duplication.
\end{itemize}

\noindent ResetPassword(emailOrUsername):
\begin{itemize}
  \item \textbf{Transition:} Sends a password reset link or code to the associated email.
  \item \textbf{Output:} Returns true if the reset link/code is sent successfully, false otherwise.
  \item \textbf{Exception:} Throws UserNotFoundException if the email or username is not found.
\end{itemize}

\noindent EnableTwoFactorAuth(userID):
\begin{itemize}
  \item \textbf{Transition:} Enables two-factor authentication for the specified user.
  \item \textbf{Output:} Returns true if the feature is enabled successfully, false otherwise.
  \item \textbf{Exception:} Throws UserNotFoundException if the user ID is invalid.
\end{itemize}

\noindent ValidateTwoFactorCode(userID, code):
\begin{itemize}
  \item \textbf{Transition:} Validates the two-factor authentication code provided by the user.
  \item \textbf{Output:} Returns true if the code is valid, false otherwise.
  \item \textbf{Exception:} Throws InvalidCodeException if the code is incorrect or expired.
\end{itemize}

\subsubsection{Local Functions}

\begin{itemize}
  \item HashPassword(password): Generates a secure hash for the given password.
  \item GenerateTwoFactorCode(userID): Creates a time-sensitive code for two-factor authentication.
  \item SendNotification(userID, message): Sends a notification to the specified user with relevant authentication details.
\end{itemize}

\newpage

\section{MIS of Object Render Module} \label{ObjectRenderModule}

\subsection{Module}

Object Render Module

\subsection{Uses}

\begin{itemize}
  \item Maps Module
  \item Object Placement Module
\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Constants}

\begin{itemize}
  \item \textbf{RENDER\_RESOLUTION\_DEFAULT}: Default resolution for rendering objects.
  \item \textbf{RENDER\_FPS\_LIMIT}: Frame-per-second limit for rendering.
  \item \textbf{RENDER\_QUALITY\_OPTIONS}: Preset quality levels (e.g., low, medium, high).
\end{itemize}

\subsubsection{Exported Access Programs}

\begin{center}
  \begin{tabular}{p{4cm} p{4cm} p{4cm} p{4cm}}
    \hline
    \textbf{Name}        & \textbf{In}                      & \textbf{Out}                          & \textbf{Exceptions}     \\
    \hline
    RenderObject         & Object ID, Position, Orientation & Rendered Object                       & RenderingException      \\
    \hline
    AdjustRenderSettings & Dictionary of key-value pairs    & Bool - Success or Fail                & InvalidSettingException \\
    \hline
    FetchRenderSettings  & -                                & Dictionary of current render settings & -                       \\
    \hline
    PauseRendering       & -                                & Bool - Success or Fail                & RenderingException      \\
    \hline
    ResumeRendering      & -                                & Bool - Success or Fail                & RenderingException      \\
    \hline
  \end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
  \item \textbf{currentRenderSettings}: Stores the current rendering settings, such as resolution and FPS.
  \item \textbf{renderQueue}: A queue of objects to be rendered.
\end{itemize}

\subsubsection{Environment Variables}

\begin{itemize}
  \item Graphics Processing Unit (GPU)
  \item Rendering Library (e.g., OpenGL, Vulkan, Unity Renderer)
\end{itemize}

\subsubsection{Assumptions}

\begin{itemize}
  \item Objects to be rendered are correctly formatted and preprocessed.
  \item The rendering hardware meets the minimum requirements.
\end{itemize}

\subsubsection{Access Routine Semantics}

\noindent RenderObject(Object ID, Position, Orientation):
\begin{itemize}
  \item transition: Adds the object to the render queue and renders it based on the given parameters.
  \item output: The rendered object appears in the virtual environment.
  \item exception: Throws \texttt{RenderingException} if the rendering fails due to hardware or software issues.
\end{itemize}

\noindent AdjustRenderSettings(Dictionary of key-value pairs):
\begin{itemize}
  \item transition: Updates the \texttt{currentRenderSettings} variable with the provided values.
  \item output: Returns a success or failure boolean.
  \item exception: Throws \texttt{InvalidSettingException} if the provided settings are invalid.
\end{itemize}

\noindent FetchRenderSettings():
\begin{itemize}
  \item transition: None.
  \item output: Returns the \texttt{currentRenderSettings}.
  \item exception: None.
\end{itemize}

\noindent PauseRendering():
\begin{itemize}
  \item transition: Pauses the rendering process.
  \item output: Returns a success or failure boolean.
  \item exception: Throws \texttt{RenderingException} if pausing fails.
\end{itemize}

\noindent ResumeRendering():
\begin{itemize}
  \item transition: Resumes the rendering process.
  \item output: Returns a success or failure boolean.
  \item exception: Throws \texttt{RenderingException} if resuming fails.
\end{itemize}

\subsubsection{Local Functions}

\begin{itemize}
  \item \textbf{ValidateRenderSettings(settings)}: Ensures that the given render settings are within acceptable ranges.
  \item \textbf{OptimizeRenderQueue()}: Reorders the render queue to improve performance.
\end{itemize}

\newpage

\section{MIS of Touring Module} \label{TouringModule}

\subsection{Module}

Touring Module

\subsection{Uses}

Realm Interface Module, Maps Module, Notifications Module

\subsection{Syntax}

\subsubsection{Exported Constants}

\begin{itemize}
  \item \textbf{DEFAULT\_TOUR\_RADIUS:} The default radius for proximity detection during tours.
\end{itemize}

\subsubsection{Exported Access Programs}

\begin{center}
  \begin{tabular}{p{4cm} p{2cm} p{4cm} p{4cm}}
    \hline
    \textbf{Name}    & \textbf{In} & \textbf{Out}           & \textbf{Exceptions}    \\
    \hline
    StartTour        & Tour ID     & Bool - Success or Fail & InvalidTourIDException \\
    \hline
    PauseTour        & -           & Bool - Success or Fail & -                      \\
    \hline
    EndTour          & Tour ID     & Bool - Success or Fail & InvalidTourIDException \\
    \hline
    FetchTourDetails & Tour ID     & Tour Object            & InvalidTourIDException \\
    \hline
  \end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
  \item \textbf{CurrentTour:} Stores the details of the ongoing tour.
\end{itemize}

\subsubsection{Environment Variables}

GPS and Maps API for location tracking.

\subsubsection{Assumptions}

It is assumed that GPS and Maps API services are functional.

\subsubsection{Access Routine Semantics}

\noindent \textbf{StartTour}:
\begin{itemize}
  \item transition: Initializes the tour with the given Tour ID and marks it as active.
  \item output: Returns success if the tour starts successfully.
  \item exception: Throws InvalidTourIDException if the Tour ID does not exist.
\end{itemize}

\noindent \textbf{PauseTour}:
\begin{itemize}
  \item transition: Pauses the current active tour.
  \item output: Returns success if the tour is paused successfully.
\end{itemize}

\noindent \textbf{EndTour}:
\begin{itemize}
  \item transition: Ends the current active tour and updates its status.
  \item output: Returns success if the tour is ended successfully.
  \item exception: Throws InvalidTourIDException if the Tour ID does not exist.
\end{itemize}

\newpage

\section{MIS of Tour List Module} \label{TourListModule}

\subsection{Module}

Tour List Module

\subsection{Uses}

Touring Module, Maps Module

\subsection{Syntax}

\subsubsection{Exported Constants}

\begin{itemize}
  \item \textbf{MAX\_TOUR\_ENTRIES:} The maximum number of tours that can be displayed in the list.
\end{itemize}

\subsubsection{Exported Access Programs}

\begin{center}
  \begin{tabular}{p{4cm} p{4cm} p{4cm} p{4cm}}
    \hline
    \textbf{Name} & \textbf{In}      & \textbf{Out}   & \textbf{Exceptions} \\
    \hline
    FetchTourList & None             & Array of Tours & -                   \\
    \hline
    SearchTours   & Search Query     & Array of Tours & -                   \\
    \hline
    SortTours     & Sorting Criteria & Array of Tours & -                   \\
    \hline
  \end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
  \item \textbf{TourList:} Stores a list of available tours.
\end{itemize}

\subsubsection{Environment Variables}

Database connection to retrieve available tours.

\subsubsection{Assumptions}

It is assumed that the database is functional and contains valid tour data.

\subsubsection{Access Routine Semantics}

\noindent \textbf{FetchTourList}:
\begin{itemize}
  \item transition: Retrieves all available tours from the database.
  \item output: Returns an array of available tours.
\end{itemize}

\noindent \textbf{SearchTours}:
\begin{itemize}
  \item transition: Filters the available tours based on the search query.
  \item output: Returns an array of tours matching the search criteria.
\end{itemize}

\noindent \textbf{SortTours}:
\begin{itemize}
  \item transition: Sorts the available tours based on the specified criteria.
  \item output: Returns an array of tours sorted by the given criteria.
\end{itemize}

\newpage

\section{MIS of Tour Management Module} \label{TourManagementModule}

\subsection{Module}

Tour Management Module

\subsection{Uses}

Realm Interface Module, Server Database Manager Module

\subsection{Syntax}

\subsubsection{Exported Constants}

\begin{itemize}
  \item \textbf{MAX\_TOUR\_POINTS:} The maximum number of waypoints allowed in a single tour.
\end{itemize}

\subsubsection{Exported Access Programs}

\begin{center}
  \begin{tabular}{p{2.5cm} p{4cm} p{4cm} p{5cm}}
    \hline
    \textbf{Name} & \textbf{In}                & \textbf{Out}           & \textbf{Exceptions}      \\
    \hline
    CreateTour    & Tour Object                & Bool - Success or Fail & InvalidTourDataException \\
    \hline
    UpdateTour    & Tour ID, Updated Tour Data & Bool - Success or Fail & InvalidTourIDException   \\
    \hline
    DeleteTour    & Tour ID                    & Bool - Success or Fail & InvalidTourIDException   \\
    \hline
  \end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
  \item \textbf{ManagedTours:} Stores a list of tours created and managed by the organization.
\end{itemize}

\subsubsection{Environment Variables}

Database connection to manage tour data.

\subsubsection{Assumptions}

It is assumed that the database is functional and contains valid tour data.

\subsubsection{Access Routine Semantics}

\noindent \textbf{CreateTour}:
\begin{itemize}
  \item transition: Adds a new tour to the database.
  \item output: Returns success if the tour is created successfully.
  \item exception: Throws InvalidTourDataException if the tour data is invalid.
\end{itemize}

\noindent \textbf{UpdateTour}:
\begin{itemize}
  \item transition: Updates the details of an existing tour in the database.
  \item output: Returns success if the tour is updated successfully.
  \item exception: Throws InvalidTourIDException if the Tour ID does not exist.
\end{itemize}

\noindent \textbf{DeleteTour}:
\begin{itemize}
  \item transition: Removes a tour from the database.
  \item output: Returns success if the tour is deleted successfully.
  \item exception: Throws InvalidTourIDException if the Tour ID does not exist.
\end{itemize}

\newpage

\section{MIS of Sub-Realms} \label{sub-realms}

\subsection{Module}

SubRealms

\subsection{Uses}

\hyperref[local-dbm]{Local Database Manager}

\subsection{Syntax}

\subsubsection{Exported Constants}

N/A

\subsubsection{Exported Access Programs}

\begin{center}
  \begin{tabular}{p{4cm} p{4cm} p{3cm} p{3cm}}
    \hline
    \textbf{Name}  & \textbf{In}                             & \textbf{Out}                            & \textbf{Exceptions}                     \\
    \hline
    getMembers     & $\mathbb{N}$                            & Array\textlangle$\mathbb{N}$\textrangle & SubRealmNotFound                        \\
    addMember      & $\mathbb{N}$, $\mathbb{N}$              & -                                       & SubRealmNotFound, UserAlreadyInSubRealm \\
    removeMember   & $\mathbb{N}$, $\mathbb{N}$              & -                                       & SubRealmNotFound, MemberNotFound        \\
    createNew      & Array\textlangle$\mathbb{N}$\textrangle & $\mathbb{N}$                            & -                                       \\
    deleteExisting & $\mathbb{N}$                            & -                                       & SubRealmNotFound                        \\
    \hline
  \end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
  \item \( subRealms \): A mapping of \( subRealmID \to subRealm \), where each \( subRealm \) contains a list of \( members \) (user IDs).
\end{itemize}

\subsubsection{Environment Variables}

\begin{itemize}
  \item \( localDB \): The local database used for storing sub-realm data temporarily.
\end{itemize}

\subsubsection{Assumptions}

Sub-realm IDs (\( subRealmID \)) are unique, and all user IDs (\( userID \)) are valid.

\subsubsection{Access Routine Semantics}

\noindent getMembers(subRealmID):
\begin{itemize}
  \item \textbf{transition}: N/A
  \item \textbf{output}: Returns the list of \( userIDs \) that are members of the sub-realm identified by \( subRealmID \).
  \item \textbf{exception}:
        \begin{itemize}
          \item \( SubRealmNotFound \): If \( subRealmID \) does not exist.
        \end{itemize}
\end{itemize}

\noindent addMember(subRealmID, userID):
\begin{itemize}
  \item \textbf{transition}:
        If \( subRealmID \in subRealms \) and \( userID \notin subRealms[subRealmID].members \), add \( userID \) to the members of the sub-realm identified by \( subRealmID \).
  \item \textbf{output}: N/A
  \item \textbf{exception}:
        \begin{itemize}
          \item \( SubRealmNotFound \): If \( subRealmID \) does not exist.
          \item \( UserAlreadyInSubRealm \): If \( userID \) is already a member of the sub-realm.
        \end{itemize}
\end{itemize}

\noindent removeMember(subRealmID, userID):
\begin{itemize}
  \item \textbf{transition}:
        If \( subRealmID \in subRealms \) and \( userID \in subRealms[subRealmID].members \), remove \( userID \) from the members of the sub-realm identified by \( subRealmID \).
  \item \textbf{output}: N/A
  \item \textbf{exception}:
        \begin{itemize}
          \item \( SubRealmNotFound \): If \( subRealmID \) does not exist.
          \item \( MemberNotFound \): If \( userID \) is not a member of the sub-realm.
        \end{itemize}
\end{itemize}

\noindent createNew(memberList):
\begin{itemize}
  \item \textbf{transition}:
        A new sub-realm is created with a unique \( subRealmID \), and its \( members \) are initialized to \( memberList \).
        The new sub-realm is stored in both the local and server databases.
  \item \textbf{output}: Returns the unique \( subRealmID \) of the newly created sub-realm.
  \item \textbf{exception}: None
\end{itemize}

\noindent deleteExisting(subRealmID):
\begin{itemize}
  \item \textbf{transition}:
        If \( subRealmID \in subRealms \), remove the sub-realm from both the local and server databases.
  \item \textbf{output}: N/A
  \item \textbf{exception}:
        \begin{itemize}
          \item \( SubRealmNotFound \): If \( subRealmID \) does not exist.
        \end{itemize}
\end{itemize}

\subsubsection{Local Functions}

\begin{itemize}
  \item \texttt{syncWithLocalDB()}: Synchronizes sub-realm data with the local database.
  \item \texttt{syncWithServerDB()}: Synchronizes sub-realm data with the server database.
\end{itemize}

\newpage

\section{MIS of Maps} \label{maps}

\subsection{Module}

Maps

\subsection{Uses}

\hyperref[local-dbm]{Local Database Manager}, Maps API (external)

\subsection{Syntax}

\subsubsection{Exported Constants}

N/A

\subsubsection{Exported Access Programs}

\begin{center}
  \begin{tabular}{p{4cm} p{3cm} p{3cm} p{4cm}}
    \hline
    \textbf{Name} & \textbf{In}                     & \textbf{Out} & \textbf{Exceptions} \\
    \hline
    getMapData    & $\mathbb{N}$                    & MapData      & LocationNotFound    \\
    addMarker     & $\mathbb{N}$, Location, Details & -            & -                   \\
    removeMarker  & $\mathbb{N}$, Location          & -            & MarkerNotFound      \\
    updateMarker  & $\mathbb{N}$, Location, Details & -            & MarkerNotFound      \\
    displayMap    & $\mathbb{N}$                    & RenderedMap  & LocationNotFound    \\
    \hline
  \end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
  \item \( markers \): A collection of markers, where each marker includes its \( Location \) and associated \( Details \).
  \item \( mapViews \): A mapping from \( \mathbb{N} \) (view IDs) to rendered map states.
\end{itemize}

\subsubsection{Environment Variables}

\begin{itemize}
  \item Access to the Google Maps API.
  \item Access to the local database for location details.
\end{itemize}

\subsubsection{Assumptions}

The Google Maps API and the local database are available and functioning properly.

\subsubsection{Access Routine Semantics}

\noindent getMapData(viewID):
\begin{itemize}
  \item \textbf{transition}: N/A
  \item \textbf{output}: Returns \( MapData \) for the \( viewID \), including all markers and details for the associated location.
  \item \textbf{exception}: \( viewID \notin mapViews \)
\end{itemize}

\noindent addMarker(viewID, location, details):
\begin{itemize}
  \item \textbf{transition}:
        If \( viewID \in mapViews \), adds a marker to the map at \( location \) with the given \( details \).
  \item \textbf{output}: N/A
  \item \textbf{exception}: None
\end{itemize}

\noindent removeMarker(viewID, location):
\begin{itemize}
  \item \textbf{transition}:
        If \( location \in markers[viewID] \), removes the marker at \( location \) from the map.
  \item \textbf{output}: N/A
  \item \textbf{exception}: \( location \notin markers[viewID] \)
\end{itemize}

\noindent updateMarker(viewID, location, details):
\begin{itemize}
  \item \textbf{transition}:
        If \( location \in markers[viewID] \), updates the marker at \( location \) with new \( details \).
  \item \textbf{output}: N/A
  \item \textbf{exception}: \( location \notin markers[viewID] \)
\end{itemize}

\noindent displayMap(viewID):
\begin{itemize}
  \item \textbf{transition}:
        Renders the map for the \( viewID \), including all markers and relevant details.
  \item \textbf{output}: Returns \( RenderedMap \), which is a visual representation of the map.
  \item \textbf{exception}: \( viewID \notin mapViews \)
\end{itemize}

\subsubsection{Local Functions}

\begin{itemize}
  \item \texttt{fetchLocationDetails(Location)}: Communicates with the local database to retrieve detailed information for a given location.
  \item \texttt{renderMap(viewID)}: Generates a visual representation of the map for the given \( viewID \) using the Google Maps API.
\end{itemize}

\newpage

\section{MIS of Object Interaction Module} \label{object-interaction}

\subsection{Module}

ObjectInteraction

\subsection{Uses}

\hyperref[local-dbm]{Local Database Manager}

\subsection{Syntax}

\subsubsection{Exported Constants}

N/A

\subsubsection{Exported Access Programs}

\begin{center}
  \begin{tabular}{p{4cm} p{4cm} p{3cm} p{3cm}}
    \hline
    \textbf{Name}  & \textbf{In}                     & \textbf{Out}                         & \textbf{Exceptions} \\
    \hline
    reportObject   & $\mathbb{N}$, Reason, Details   & -                                    & ObjectNotFound      \\
    reactToObject  & $\mathbb{N}$, Reaction          & -                                    & ObjectNotFound      \\
    fetchReactions & $\mathbb{N}$                    & Array\textlangle Reaction\textrangle & ObjectNotFound      \\
    fetchReports   & $\mathbb{N}$                    & Array\textlangle Report\textrangle   & ObjectNotFound      \\
    resolveReport  & $\mathbb{N}$, ResolutionDetails & -                                    & ReportNotFound      \\
    \hline
  \end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
  \item \( objects \): A collection of AR objects, each identified by a unique \( \mathbb{N} \).
  \item \( reports \): A collection of reports associated with AR objects, including \( Reason \) and \( Details \).
  \item \( reactions \): A collection of user reactions, associated with specific AR objects.
\end{itemize}

\subsubsection{Environment Variables}

\begin{itemize}
  \item AR objects are rendered and interactable in the environment.
  \item The system must have a connection to the local database for storing reports and reactions.
\end{itemize}

\subsubsection{Assumptions}

All AR objects are assigned unique identifiers and are interactable within the system. Users have access to a predefined set of reaction types (e.g., Like, Dislike).

\subsubsection{Access Routine Semantics}

\noindent reportObject(objectID, reason, details):
\begin{itemize}
  \item \textbf{transition}:
        Adds a new report to \( reports \) for the object identified by \( objectID \), with the specified \( reason \) and \( details \).
  \item \textbf{output}: N/A
  \item \textbf{exception}: \( objectID \notin objects \)
\end{itemize}

\noindent reactToObject(objectID, reaction):
\begin{itemize}
  \item \textbf{transition}:
        Adds a \( reaction \) (e.g., Like, Dislike) to \( reactions \) for the object identified by \( objectID \).
  \item \textbf{output}: N/A
  \item \textbf{exception}: \( objectID \notin objects \)
\end{itemize}

\noindent fetchReactions(objectID):
\begin{itemize}
  \item \textbf{transition}: N/A
  \item \textbf{output}: Returns all \( reactions \) associated with \( objectID \).
  \item \textbf{exception}: \( objectID \notin objects \)
\end{itemize}

\noindent fetchReports(objectID):
\begin{itemize}
  \item \textbf{transition}: N/A
  \item \textbf{output}: Returns all \( reports \) associated with \( objectID \).
  \item \textbf{exception}: \( objectID \notin objects \)
\end{itemize}

\noindent resolveReport(reportID, resolutionDetails):
\begin{itemize}
  \item \textbf{transition}:
        Marks the \( report \) identified by \( reportID \) as resolved and stores the \( resolutionDetails \).
  \item \textbf{output}: N/A
  \item \textbf{exception}: \( reportID \notin reports \)
\end{itemize}

\subsubsection{Local Functions}

\begin{itemize}
  \item \texttt{validateObject(objectID)}: Ensures \( objectID \) corresponds to a valid AR object in the system.
  \item \texttt{notifyUser(reportID)}: Sends a notification to the user who submitted the report, indicating its resolution status.
\end{itemize}

\newpage

\section{MIS of Local Database Manager} \label{local-dbm}

\subsection{Module}

LocalDBM

\subsection{Uses}

\hyperref[server-dbm]{Server Database Manager}

\subsection{Syntax}

\subsubsection{Exported Constants}

N/A

\subsubsection{Exported Access Programs}

\begin{center}
  \begin{tabular}{p{4cm} p{4cm} p{3cm} p{3cm}}
    \hline
    \textbf{Name}  & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
    \hline
    fetchData      & Query       & Data         & DataNotFound        \\
    saveData       & Key, Data   & -            & -                   \\
    updateData     & Key, Data   & -            & DataNotFound        \\
    deleteData     & Key         & -            & DataNotFound        \\
    syncWithServer & -           & -            & ServerError         \\
    getCachedData  & Key         & Data         & DataNotCached       \\
    \hline
  \end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
  \item \( localCache \): A local in-memory or on-disk cache, keyed by unique \( Key \), storing frequently accessed data.
  \item \( lastSyncTime \): A timestamp of the last successful synchronization with the server database.
\end{itemize}

\subsubsection{Environment Variables}

\begin{itemize}
  \item Access to the server database for retrieving and storing persistent data.
  \item A local caching mechanism (e.g., in-memory cache or local storage).
\end{itemize}

\subsubsection{Assumptions}

The server database is available and operational for syncing, and the local caching system has sufficient storage capacity.

\subsubsection{Access Routine Semantics}

\noindent fetchData(query):
\begin{itemize}
  \item \textbf{transition}: N/A
  \item \textbf{output}: Executes \( query \) on the local cache or the server database if the data is not cached, and returns the \( Data \).
  \item \textbf{exception}: Returns \( DataNotFound \) if the query does not match any records.
\end{itemize}

\noindent saveData(key, data):
\begin{itemize}
  \item \textbf{transition}:
        Stores \( data \) in the \( localCache \) with the associated \( key \). Also updates the server database asynchronously.
  \item \textbf{output}: N/A
  \item \textbf{exception}: None
\end{itemize}

\noindent updateData(key, data):
\begin{itemize}
  \item \textbf{transition}:
        Updates \( data \) in \( localCache \) and synchronizes the change to the server database.
  \item \textbf{output}: N/A
  \item \textbf{exception}: \( key \notin localCache \)
\end{itemize}

\noindent deleteData(key):
\begin{itemize}
  \item \textbf{transition}:
        Removes \( data \) identified by \( key \) from \( localCache \) and the server database.
  \item \textbf{output}: N/A
  \item \textbf{exception}: \( key \notin localCache \)
\end{itemize}

\noindent syncWithServer():
\begin{itemize}
  \item \textbf{transition}:
        Synchronizes the \( localCache \) with the server database, updating any stale or missing records.
  \item \textbf{output}: N/A
  \item \textbf{exception}: \( ServerError \) if the server database is unavailable or the synchronization fails.
\end{itemize}

\noindent getCachedData(key):
\begin{itemize}
  \item \textbf{transition}: N/A
  \item \textbf{output}: Returns \( data \) from \( localCache \) associated with \( key \).
  \item \textbf{exception}: \( key \notin localCache \)
\end{itemize}

\subsubsection{Local Functions}

\begin{itemize}
  \item \texttt{isCacheStale(key)}: Determines whether the cached data for \( key \) is outdated compared to the server database.
  \item \texttt{resolveConflict(localData, serverData)}: Resolves discrepancies between \( localCache \) and server database data.
\end{itemize}

\newpage

\section{MIS of Data Sync Module} \label{DataSync}

The Data Sync Module updates the common data on both the local and server databases based on whichever has the most up-to-date information. This will mostly just apply to locally stored AR Objects.

\subsection{Module}

DataSyncModule

\subsection{Uses}

Server Database Manager Module\\
Local Database Manager Module

\subsection{Syntax}

\subsubsection{Exported Constants}

N/A

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{2cm} p{4cm} p{4cm} p{2cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
Sync & - & - & SyncFailureException \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

syncInProgress: $\mathbb{B}$

\subsubsection{Environment Variables}

N/A

\subsubsection{Assumptions}

N/A

\subsubsection{Access Routine Semantics}

\noindent Sync():
\begin{itemize}
\item transition: local\_obj.lastModified $<$ server\_obj.lastModified == True $\Rightarrow$ LocalDatabaseManager.update(local\_obj, server\_obj)
\item exception: (LocalDatabaseManager == null $\vee$ ServerDatabaseManager == null) $\Rightarrow$ SyncFailureException
\end{itemize}

\subsubsection{Local Functions}

N/A

\newpage

\section{MIS of Server Database Manager} \label{server-dbm}

\subsection{Module}

ServerDBM

\subsection{Uses}

\hyperref[local-dbm]{Local Database Manager}

\subsection{Syntax}

\subsubsection{Exported Constants}

N/A

\subsubsection{Exported Access Programs}

\begin{center}
  \begin{tabular}{p{4cm} p{4cm} p{3cm} p{3cm}}
    \hline
    \textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions}        \\
    \hline
    fetchData     & Query       & Data         & DataNotFound, NetworkError \\
    saveData      & Key, Data   & -            & NetworkError               \\
    updateData    & Key, Data   & -            & DataNotFound, NetworkError \\
    deleteData    & Key         & -            & DataNotFound, NetworkError \\
    syncWithLocal & DataDiff    & -            & NetworkError               \\
    \hline
  \end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
  \item \( database \): The server database that stores all permanent data associated with the app.
  \item \( lastSyncTime \): A timestamp indicating the last synchronization with the local database.
\end{itemize}

\subsubsection{Environment Variables}

\begin{itemize}
  \item Network connectivity must be available for communication between the server database and local database manager.
\end{itemize}

\subsubsection{Assumptions}

The server database is accessible, operational, and synchronized with the local database manager periodically.

\subsubsection{Access Routine Semantics}

\noindent fetchData(query):
\begin{itemize}
  \item \textbf{transition}: N/A
  \item \textbf{output}: Executes \( query \) on the server database and returns the corresponding \( Data \).
  \item \textbf{exception}:
        \begin{itemize}
          \item \( DataNotFound \): If \( query \) does not match any records in the database.
          \item \( NetworkError \): If the network connection fails.
        \end{itemize}
\end{itemize}

\noindent saveData(key, data):
\begin{itemize}
  \item \textbf{transition}:
        Adds \( data \) to the server database with the associated \( key \).
  \item \textbf{output}: N/A
  \item \textbf{exception}:
        \begin{itemize}
          \item \( NetworkError \): If the network connection fails.
        \end{itemize}
\end{itemize}

\noindent updateData(key, data):
\begin{itemize}
  \item \textbf{transition}:
        Updates \( data \) in the server database associated with \( key \).
  \item \textbf{output}: N/A
  \item \textbf{exception}:
        \begin{itemize}
          \item \( DataNotFound \): If \( key \) does not exist in the database.
          \item \( NetworkError \): If the network connection fails.
        \end{itemize}
\end{itemize}

\noindent deleteData(key):
\begin{itemize}
  \item \textbf{transition}:
        Removes the record associated with \( key \) from the server database.
  \item \textbf{output}: N/A
  \item \textbf{exception}:
        \begin{itemize}
          \item \( DataNotFound \): If \( key \) does not exist in the database.
          \item \( NetworkError \): If the network connection fails.
        \end{itemize}
\end{itemize}

\noindent syncWithLocal(dataDiff):
\begin{itemize}
  \item \textbf{transition}:
        Synchronizes the \( database \) with changes provided in \( dataDiff \) from the local database manager.
  \item \textbf{output}: N/A
  \item \textbf{exception}:
        \begin{itemize}
          \item \( NetworkError \): If the network connection fails during synchronization.
        \end{itemize}
\end{itemize}

\subsubsection{Local Functions}

\begin{itemize}
  \item \texttt{applyDataDiff(dataDiff)}: Applies the changes from \( dataDiff \) to the server database during synchronization.
  \item \texttt{logSyncOperation(status)}: Logs the success or failure of the synchronization operation.
\end{itemize}

\newpage

\section{MIS of REST API Communication Module} \label{rest-api}

\subsection{Module}

RESTAPICommunication

\subsection{Uses}

\hyperref[server-dbm]{Server Database Manager}, HTTP Client Library (external)

\subsection{Syntax}

\subsubsection{Exported Constants}

N/A

\subsubsection{Exported Access Programs}

\begin{center}
  \begin{tabular}{p{5cm} p{4cm} p{3cm} p{3cm}}
    \hline
    \textbf{Name}        & \textbf{In}              & \textbf{Out}   & \textbf{Exceptions}    \\
    \hline
    sendRequest          & Endpoint, Method, Params & Response       & APIError, NetworkError \\
    parseResponse        & RawResponse              & ParsedResponse & ResponseParsingError   \\
    setHeaders           & Headers                  & -              & -                      \\
    handleAuthentication & AuthToken                & -              & AuthError              \\
    checkServerStatus    & -                        & ServerStatus   & APIError, NetworkError \\
    \hline
  \end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
  \item \( baseURL \): The base URL for the REST API server.
  \item \( headers \): Key-value pairs for HTTP headers, including authentication tokens and content type.
\end{itemize}

\subsubsection{Environment Variables}

\begin{itemize}
  \item Network connectivity for sending HTTP requests to the REST API server.
\end{itemize}

\subsubsection{Assumptions}

The REST API server follows standard HTTP and REST conventions, and the API endpoints are well-documented and accessible.

\subsubsection{Access Routine Semantics}

\noindent sendRequest(endpoint, method, params):
\begin{itemize}
  \item \textbf{transition}:
        Sends an HTTP request to the API server at \( baseURL + endpoint \) using the specified HTTP \( method \) (e.g., GET, POST, PUT, DELETE) and \( params \) as query parameters or request body.
  \item \textbf{output}:
        Returns the \( Response \) received from the API server.
  \item \textbf{exception}:
        \begin{itemize}
          \item \( APIError \): If the server responds with an error status code (e.g., 4xx or 5xx).
          \item \( NetworkError \): If the request fails due to network issues.
        \end{itemize}
\end{itemize}

\noindent parseResponse(rawResponse):
\begin{itemize}
  \item \textbf{transition}: N/A
  \item \textbf{output}:
        Converts \( rawResponse \) (raw HTTP response) into a structured \( ParsedResponse \) (e.g., JSON or XML object).
  \item \textbf{exception}:
        \begin{itemize}
          \item \( ResponseParsingError \): If the \( rawResponse \) cannot be parsed due to invalid format.
        \end{itemize}
\end{itemize}

\noindent setHeaders(headers):
\begin{itemize}
  \item \textbf{transition}:
        Updates the \( headers \) used for subsequent HTTP requests.
  \item \textbf{output}: N/A
  \item \textbf{exception}: None
\end{itemize}

\noindent handleAuthentication(authToken):
\begin{itemize}
  \item \textbf{transition}:
        Sets the authentication token in the \( headers \) for authorized requests.
  \item \textbf{output}: N/A
  \item \textbf{exception}:
        \begin{itemize}
          \item \( AuthError \): If the \( authToken \) is invalid or rejected by the server.
        \end{itemize}
\end{itemize}

\noindent checkServerStatus():
\begin{itemize}
  \item \textbf{transition}: N/A
  \item \textbf{output}:
        Returns the \( ServerStatus \) indicating whether the API server is reachable and operational.
  \item \textbf{exception}:
        \begin{itemize}
          \item \( APIError \): If the server responds with an error status code.
          \item \( NetworkError \): If the request fails due to network issues.
        \end{itemize}
\end{itemize}

\subsubsection{Local Functions}

\begin{itemize}
  \item \texttt{buildURL(endpoint, params)}: Constructs the complete URL for the API request by appending \( endpoint \) to \( baseURL \) and encoding \( params \) as query parameters.
  \item \texttt{logRequest(requestDetails)}: Logs details of the outgoing API request for debugging purposes.
  \item \texttt{retryRequest(requestDetails)}: Attempts to resend a failed request based on the retry policy.
\end{itemize}

\newpage

\section{MIS of Object Importer Module} \label{object-importer}

\subsection{Module}

ObjectImporter

\subsection{Uses}

\hyperref[local-dbm]{Local Database Manager}

\subsection{Syntax}

\subsubsection{Exported Constants}

N/A

\subsubsection{Exported Access Programs}

\begin{center}
  \begin{tabular}{p{5cm} p{5cm} p{3cm} p{3cm}}
    \hline
    \textbf{Name}        & \textbf{In} & \textbf{Out}                       & \textbf{Exceptions}            \\
    \hline
    importObject         & FilePath    & ObjectID                           & InvalidFileFormat, ImportError \\
    validateObject       & FilePath    & Boolean                            & InvalidFileFormat              \\
    addObjectToInventory & ObjectID    & -                                  & ObjectAlreadyExists            \\
    listSupportedFormats & -           & Array\textlangle String\textrangle & -                              \\
    \hline
  \end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
  \item \( supportedFormats \): A list of file formats (e.g., OBJ, FBX, GLTF) that the module can process.
  \item \( importedObjects \): A mapping of \( ObjectID \to ObjectMetadata \), representing all objects imported by the user.
\end{itemize}

\subsubsection{Environment Variables}

\begin{itemize}
  \item File system access for reading 3D model files.
  \item Network connectivity for syncing imported objects with the server database.
\end{itemize}

\subsubsection{Assumptions}

The file paths provided are accessible, and the objects being imported are in formats supported by the module.

\subsubsection{Access Routine Semantics}

\noindent importObject(filePath):
\begin{itemize}
  \item \textbf{transition}:
        Reads the 3D model file from \( filePath \), parses it using the 3D Model Parser Library, and generates an \( ObjectID \). The object is then stored locally and synced with the server database.
  \item \textbf{output}:
        Returns the \( ObjectID \) of the successfully imported object.
  \item \textbf{exception}:
        \begin{itemize}
          \item \( InvalidFileFormat \): If the file format is not supported.
          \item \( ImportError \): If the file cannot be read or parsed due to corruption or other issues.
        \end{itemize}
\end{itemize}

\noindent validateObject(filePath):
\begin{itemize}
  \item \textbf{transition}: N/A
  \item \textbf{output}:
        Returns \( true \) if the file at \( filePath \) is in a supported format and passes initial validation, \( false \) otherwise.
  \item \textbf{exception}:
        \begin{itemize}
          \item \( InvalidFileFormat \): If the file format is not supported.
        \end{itemize}
\end{itemize}

\noindent addObjectToInventory(objectID):
\begin{itemize}
  \item \textbf{transition}:
        Adds the object identified by \( objectID \) to the user's inventory and marks it as available for use within the app.
  \item \textbf{output}: N/A
  \item \textbf{exception}:
        \begin{itemize}
          \item \( ObjectAlreadyExists \): If the object is already present in the user's inventory.
        \end{itemize}
\end{itemize}

\noindent listSupportedFormats():
\begin{itemize}
  \item \textbf{transition}: N/A
  \item \textbf{output}:
        Returns the list of \( supportedFormats \), indicating which file types can be imported.
  \item \textbf{exception}: None
\end{itemize}

\subsubsection{Local Functions}

\begin{itemize}
  \item \texttt{parseFile(filePath)}: Reads and parses the 3D model file to extract metadata and geometry.
  \item \texttt{generateObjectID(metadata)}: Generates a unique identifier for the imported object based on its metadata.
  \item \texttt{syncObjectWithServer(objectID)}: Uploads the imported object’s metadata to the server database.
\end{itemize}

\newpage

\section{MIS of Realm Interface Module} \label{realm-interface}

\subsection{Module}

RealmInterface

\subsection{Uses}

\ref{sub-realms}, \ref{maps}, 3D Renderer, AR Framework

\subsection{Syntax}

\subsubsection{Exported Constants}

N/A

\subsubsection{Exported Access Programs}

\begin{center}
  \begin{tabular}{p{5cm} p{5cm} p{3cm} p{3cm}}
    \hline
    \textbf{Name}          & \textbf{In}                                           & \textbf{Out} & \textbf{Exceptions} \\
    \hline
    displayObjectsInRealm  & $\mathbb{N}$                                          & -            & SubRealmNotFound    \\
    navigateToMap          & -                                                     & -            & -                   \\
    updateDisplayedObjects & $\mathbb{N}$, Array\textlangle$\mathbb{N}$\textrangle & -            & SubRealmNotFound    \\
    getActiveSubRealm      & -                                                     & $\mathbb{N}$ & NoActiveSubRealm    \\
    setActiveSubRealm      & $\mathbb{N}$                                          & -            & SubRealmNotFound    \\
    \hline
  \end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{itemize}
  \item \( activeSubRealm \): The \( subRealmID \) of the currently selected sub-realm.
  \item \( displayedObjects \): A list of 3D objects being rendered in the current view.
\end{itemize}

\subsubsection{Environment Variables}

\begin{itemize}
  \item 3D rendering engine for displaying AR objects.
  \item Maps module interface for quick navigation.
\end{itemize}

\subsubsection{Assumptions}

A valid \( subRealmID \) corresponds to an existing sub-realm, and all objects in the realm are properly loaded.

\subsubsection{Access Routine Semantics}

\noindent displayObjectsInRealm(subRealmID):
\begin{itemize}
  \item \textbf{transition}:
        Retrieves the 3D objects associated with \( subRealmID \) and displays them in the AR view.
  \item \textbf{output}: N/A
  \item \textbf{exception}:
        \begin{itemize}
          \item \( SubRealmNotFound \): If \( subRealmID \) does not exist.
        \end{itemize}
\end{itemize}

\noindent navigateToMap():
\begin{itemize}
  \item \textbf{transition}:
        Opens the Maps interface to display the map view.
  \item \textbf{output}: N/A
  \item \textbf{exception}: None
\end{itemize}

\noindent updateDisplayedObjects(subRealmID, objectIDs):
\begin{itemize}
  \item \textbf{transition}:
        Updates the list of objects displayed in the AR view for the specified \( subRealmID \). Removes any previously displayed objects not in \( objectIDs \).
  \item \textbf{output}: N/A
  \item \textbf{exception}:
        \begin{itemize}
          \item \( SubRealmNotFound \): If \( subRealmID \) does not exist.
        \end{itemize}
\end{itemize}

\noindent getActiveSubRealm():
\begin{itemize}
  \item \textbf{transition}: N/A
  \item \textbf{output}:
        Returns the \( subRealmID \) of the currently active sub-realm.
  \item \textbf{exception}:
        \begin{itemize}
          \item \( NoActiveSubRealm \): If no sub-realm is currently active.
        \end{itemize}
\end{itemize}

\noindent setActiveSubRealm(subRealmID):
\begin{itemize}
  \item \textbf{transition}:
        Sets the \( subRealmID \) as the \( activeSubRealm \) and updates the displayed objects accordingly.
  \item \textbf{output}: N/A
  \item \textbf{exception}:
        \begin{itemize}
          \item \( SubRealmNotFound \): If \( subRealmID \) does not exist.
        \end{itemize}
\end{itemize}

\subsubsection{Local Functions}

\begin{itemize}
  \item \texttt{loadObjects(subRealmID)}: Loads 3D object data for the given \( subRealmID \) from the local or server database.
  \item \texttt{renderObjects(objectList)}: Renders the provided list of 3D objects in the AR view.
  \item \texttt{clearDisplay()}: Removes all objects currently displayed in the AR view.
\end{itemize}

\newpage

\section{MIS of AccessHardware} \label{mod-hardware}

The AccessHardware module is used to interface with the hardware components of the device. The module will be used to access the camera, GPS, and an array of device sensors on the mobile device.

\subsection{Module}

\textbf{Short Name: AccHard}

\subsection{Uses}

\textbf{AccHard} does not use any other modules.

\subsection{Syntax}

\subsubsection{Exported Constants}
\begin{enumerate}
  \item CAM\_RES\_WIDTH = 1920 (Default width of the camera resolution)
  \item CAM\_RES\_HEIGHT = 1080 (Default height of the camera resolution)
\end{enumerate}

\subsubsection{Exported Access Programs}

\begin{center}
\begin{tabular}{p{4cm} p{4cm} p{4cm} p{4cm}}
\hline
\textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
\hline
getResH() & None & Resolution height : $\mathbb{N}$ & None \\
\hline
getResW() & None & Resolution width : $\mathbb{N}$ & None \\
\hline
getFrameRate() & None & Frame rate : $\mathbb{N}$ & None \\
\hline
getNextFrame() & None & Frame : $\mathbb{Z}$\textbf{[ ]} & \textbf{FrameNotFoundException} \\
\hline
getFrame() & FrameID : $\mathbb{N}$ & Frame : $\mathbb{Z}$\textbf{[ ]} & \textbf{FrameNotFoundException} \\
\hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{enumerate}
  \item FRAME\_COUNT : $\mathbb{N}$ (Number of frames captured by the camera)
  \item FRAME\_BUFFER : $\mathbb{Z}$\textbf{[ ]}\textbf{[ ]} (Buffer to store frames captured by the camera)
  \item CAM\_PROG\_SCAN : $\mathbb{B}$ (Camera scans progressively if true, else scans using interlaced)
  \item CAM\_ACC : $\mathbb{B}$ (Access to device camera)
  \item GPS\_ACC : $\mathbb{B}$ (Access to device GPS)
\end{enumerate}

\subsubsection{Environment Variables}

\begin{enumerate}
  \item CAM\_RES\_WIDTH : $\mathbb{N}$ (Current width of the camera resolution)
  \item CAM\_RES\_HEIGHT : $\mathbb{N}$ (Current height of the camera resolution)
  \item FRAME\_RATE : $\mathbb{N}$ (Current frame rate of the camera)
  \item CAM\_ON : $\mathbb{B}$ (Device camera turned on)
\end{enumerate}
\subsubsection{Assumptions}

\begin{itemize}
  \item Device provides the ability to access the camera and GPS through device applications
\end{itemize}

\subsubsection{Access Routine Semantics}

\noindent getResH():
\begin{itemize}
\item transition: No transition
\item output: Returns the camera resolution height
\item exception: No exceptions
\end{itemize}

\noindent getResW():
\begin{itemize}
\item transition: No transition
\item output: Returns the camera resolution width
\item exception: No exceptions
\end{itemize}

\noindent getFrameRate():
\begin{itemize}
\item transition: No transition
\item output: Returns the camera frame rate
\item exception: No exceptions
\end{itemize}

\noindent getNextFrame():
\begin{itemize}
\item transition: No transition
\item output: Returns the next frame as a buffer.
\item exception: Raises \textbf{FrameNotFoundException} if the next frame cannot be returned.
\end{itemize}

\noindent getFrame(FrameID):
\begin{itemize}
\item transition: No transition
\item output: Returns the frame matching the given FrameID.
\item exception: Raises \textbf{FrameNotFoundException} if the specified frame cannot be found.
\end{itemize}

\subsubsection{Local Functions}

\begin{enumerate}
  \item ReqCamAccess(): None $\rightarrow$ $\mathbb{B}$
\end{enumerate}


\section{MIS of Inventory} \label{inventory}

The Inventory module is used to manage the user's inventory of 3D and 2D AR objects. The module will be used to add, remove, and view objects in the user's inventory. The module will also be used to access the user's inventory while placing objects in the AR environment.

\subsection{Module}

\textbf{Short Name: Inventory}

\subsection{Uses}
\begin{itemize}
  \item \hyperref[rest-api]{RESTAPICommunication}
  \item \hyperref[ObjectRenderModule]{Object Render Module}
  \item \hyperref[local-dbm]{LocalDBM}
  \item \hyperref[DataSync]{DataSyncModule}
\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Constants}
\begin{enumerate}
  \item MAX\_OBJ\_COUNT = 100 (Maximum number of objects that can be stored in the user's inventory (except for application-provided objects))
  \item FILTER\_OPTS = \{Favorites, Oldest, Newest, Most Shared, Least Shared, Largest Size, Smallest Size\} (Fixed list of filter options that can be applied to the user's inventory)
\end{enumerate}

\subsubsection{Exported Access Programs}

\begin{center}
  \begin{tabular}{p{4cm} p{4cm} p{4cm} p{4cm}}
    \hline
    \textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
    \hline
    getObjCount & None & $\mathbb{N}$ & None \\
    \hline
    addObj & Object : $\mathbb{AR}$ & $\mathbb{B}$ & \textbf{ObjAddException} \\
    \hline
    getObj & ObjectID : $\mathbb{N}$ & $\mathbb{AR}$ & \textbf{ObjNotFoundException} \\
    \hline
    delObj & ObjectID : $\mathbb{N}$ & $\mathbb{B}$ & \textbf{ObjDelException} \\
    \hline
    getObjList & ObjectIDs : $\mathbb{N}$\textbf{[ ]} & Object List : $\mathbb{AR}$\textbf{[ ]} & \textbf{ObjNotFoundException} \\
    \hline
    setBackColor & Color code : $\mathbb{N}$\textbf{[3]} & None & None \\
    \hline
  \end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{enumerate}
  \item OBJ\_SYNCED : $\mathbb{B}$ (true if objects that are synced with the server, else false)
  \item TOTAL\_OBJ\_COUNT : $\mathbb{N}$ (Total number of objects in the user's inventory)
  \item 3D\_OBJECT\_COUNT : $\mathbb{N}$ (Number of 3D objects in the user's inventory)
  \item 2D\_OBJECT\_COUNT : $\mathbb{N}$ (Number of 2D objects in the user's inventory)
  \item BACKGROUND\_COLOR : str (Color code of the background of the inventory)
\end{enumerate}

\subsubsection{Environment Variables}

No environment variables for this module.

\subsubsection{Assumptions}

No assumptions are made for this module.

\subsubsection{Access Routine Semantics}

\noindent getObjCount():
\begin{itemize}
\item transition: No transition
\item output: Returns the number of objects in the user's inventory.
\item exception: No exceptions
\end{itemize}

\noindent addObj(Object : $\mathbb{AR}$):
\begin{itemize}
\item transition: Adds the specified AR object to the user's inventory.
\item output: Returns a boolean indicating whether the object was successfully added (true for success, false otherwise).
\item exception: Raises \textbf{ObjAddException} if the object cannot be added.
\end{itemize}

\noindent getObj(ObjectID: $\mathbb{N}$):
\begin{itemize}
\item transition: No transition
\item output: Returns the AR object corresponding to the given ObjectID.
\item exception: Raises \textbf{ObjNotFoundException} if the specified object cannot be found in the inventory.
\end{itemize}

\noindent delObj(ObjectID: $\mathbb{N}$):
\begin{itemize}
\item transition:  Removes the AR object corresponding to the given ObjectID from the user's inventory.
\item output: Returns a boolean indicating whether the object was successfully removed (true for success, false otherwise).
\item exception: Raises \textbf{ObjDelException} if the object cannot be deleted.
\end{itemize}

\noindent getObjList(ObjectIDs: $\mathbb{N}$\textbf{[ ]}):
\begin{itemize}
\item transition: No transition
\item output: Returns a list of AR objects ($\mathbb{AR}$\textbf{[ ]}) corresponding to the specified ObjectIDs
\item exception: Raises \textbf{ObjNotFoundException} if any of the specified objects cannot be found in the inventory.
\end{itemize}

\noindent setBackColor(ColorCode: $\mathbb{N}$\textbf{[3]}):
\begin{itemize}
\item transition: Updates the background color setting for the inventory view using the specified RGB color code ($\mathbb{N}$\textbf{[3]}).
\item output: None
\item exception: None
\end{itemize}

\subsubsection{Local Functions}

\begin{enumerate}
  \item filterObj(): (Filter option : str, Objects : $\mathbb{AR}$\textbf{[ ]}) $\rightarrow$ $\mathbb{AR}$\textbf{[ ]}
  \item syncObjs(): None $\rightarrow$ $\mathbb{B}$
\end{enumerate}

\section{MIS of ObjectPlacement} \label{obj-place}

The Object Placement module is used to place 3D and 2D AR objects in the AR environment. The module will be used in the Realm interface to begin the object placement workflow. It will place objects from the user's inventory.

\subsection{Module}

\textbf{Short Name: ObjPlacer}

\subsection{Uses}
\begin{itemize}
  \item \hyperref[rest-api]{RESTAPICommunication}
  \item \hyperref[ObjectRenderModule]{Object Render Module}
  \item \hyperref[inventory]{Inventory}
\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Constants}
There are no constants for this module.

\subsubsection{Exported Access Programs}

\begin{center}
  \begin{tabular}{p{3cm} p{4cm} p{4cm} p{4cm}}
    \hline
    \textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
    \hline
    beginPlacement & None & $\mathbb{B}$ & \textbf{PlacementFailException} \\
    \hline
    displayEditor & None & $\mathbb{B}$ & None \\
    \hline
    hideEditor & None & $\mathbb{B}$ & None \\
    \hline
    termPlacement & None & $\mathbb{B}$ & \textbf{PlacementFailException} \\
    \hline
    endPlacement & None & $\mathbb{B}$ & \textbf{PlacementFailException} \\
    \hline
    rotateObj & (Angle : $\mathbb{Z}$, Axis : char) & Angle rotated : $\mathbb{Z}$ & None \\
    \hline
    translateObj & (Distance : $\mathbb{Z}$, Axis : char) & Dist Translated : $\mathbb{Z}$ & None \\
    \hline
    placeObj & ObjectID : $\mathbb{N}$ & $\mathbb{B}$ & \textbf{ObjPlaceException} \\
    \hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{enumerate}
  \item PLACEMENT\_STATUS : $\mathbb{B}$ (true if object placement is in progress, else false)
  \item OBJ\_PLACED : $\mathbb{B}$ (true if object is placed in the AR environment, else false)
  \item OBJ\_ID : $\mathbb{N}$ (ID of the object being placed)
  \item OBJ\_POS : $\mathbb{Z}$\textbf{[3]} (XYZ position of the object in the AR environment)
\end{enumerate}

\subsubsection{Environment Variables}

\begin{enumerate}
  \item DEVICE\_LOCATION : $\mathbb{Z}$\textbf{[3]} (Current location of the device)
\end{enumerate}

\subsubsection{Assumptions}

\begin{itemize}
  \item The user is not located in a restricted area.
  \item The user has objects in their inventory.
  \item The weather is not hazardous.
  \item The user surroundings is large enough for the object to be placed.
\end{itemize}

\subsubsection{Access Routine Semantics}

\noindent beginPlacement():
\begin{itemize}
\item transition: Initiates the object placement workflow in the AR environment.
\item output: Returns a boolean indicating whether the workflow started successfully (true for success, false otherwise).
\item exception: Raises \textbf{PlacementFailException} if the workflow cannot be initiated.
\end{itemize}

\noindent displayEditor():
\begin{itemize}
\item transition: Displays the object placement editor in the AR environment.
\item output: Returns a boolean indicating whether the editor was displayed successfully (true for success, false otherwise).
\item exception: No exceptions
\end{itemize}

\noindent hideEditor():
\begin{itemize}
\item transition: Hides the object placement editor from the AR environment.
\item output: Returns a boolean indicating whether the editor was hidden successfully (true for success, false otherwise).
\item exception: No exceptions
\end{itemize}

\noindent termPlacement():
\begin{itemize}
\item transition: Terminates the object placement workflow in the AR environment without finalizing the placement.
\item output: Returns a boolean indicating whether the workflow was terminated successfully (true for success, false otherwise).
\item exception: Raises \textbf{PlacementFailException} if the workflow cannot be terminated.
\end{itemize}

\noindent endPlacement():
\begin{itemize}
\item transition: Ends the object placement workflow, finalizing the placement in the AR environment.
\item output: Returns a boolean indicating whether the workflow ended successfully (true for success, false otherwise).
\item exception: Raises \textbf{PlacementFailException} if the workflow cannot be ended.
\end{itemize}

\noindent rotateObj(Angle: $\mathbb{Z}$, Axis: char):
\begin{itemize}
\item transition: Rotates the object in the AR environment by the specified angle (Angle) around the specified axis (Axis).
\item output: Returns the total angle the object was rotated.
\item exception: No exceptions
\end{itemize}

\noindent translateObj(Distance: $\mathbb{Z}$, Axis: char):
\begin{itemize}
\item transition: Translates the object in the AR environment by the specified distance (Distance) along the specified axis (Axis).
\item output: Returns the total distance the object is translated by.
\item exception: No exceptions
\end{itemize}

\noindent placeObj(ObjectID: $\mathbb{N}$):
\begin{itemize}
\item transition: Places the specified object (identified by ObjectID) from the user's inventory into the AR environment.
\item output: Returns a boolean indicating whether the object was placed successfully (true for success, false otherwise).
\item exception: Raises \textbf{ObjPlaceException} if the object cannot be placed.
\end{itemize}

\subsubsection{Local Functions}

\begin{enumerate}
  \item getObj(): None $\rightarrow$ $\mathbb{AR}$
  \item checkRestrictArea(): None $\rightarrow$ $\mathbb{B}$
  \item checkWeatherHaz(): None $\rightarrow$ $\mathbb{B}$
  \item checkObjCollisions(): None $\rightarrow$ $\mathbb{B}$
  \item getCoords(): None $\rightarrow$ $\mathbb{Z}$\textbf{[3]}
\end{enumerate}

\section{MIS of RestrictedAreaDetect} \label{rest-area}

The Restricted Area Detection module is used to detect if the user is located in a restricted area. The module will be get the user's location and determine if they are present in a pre-defined restricted area.

\subsection{Module}

\textbf{Short Name: RestrictAreaDet}

\subsection{Uses}
\begin{itemize}
  \item \hyperref[rest-api]{RESTAPICommunication}
  \item \hyperref[maps]{Maps}
\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Constants}

The module does not have any constants.

\subsubsection{Exported Access Programs}

\begin{center}
  \begin{tabular}{p{5cm} p{2cm} p{2cm} p{3cm}}
    \hline
    \textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
    \hline
    checkCurrAreaRestrict & None & $\mathbb{B}$ & None \\
    \hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

There are no state variables for this module.

\subsubsection{Environment Variables}

There are no environment variables for this module.

\subsubsection{Assumptions}

There are no assumptions for this module.

\subsubsection{Access Routine Semantics}

\noindent checkCurrAreaRestrict():
\begin{itemize}
\item transition: No transition
\item output: Return a boolean indicating whether the user is in a restricted area (true if in a restricted area, otherwise false).
\item exception: No exceptions
\end{itemize}

\subsubsection{Local Functions}

\begin{enumerate}
  \item getUserLocation(): None $\rightarrow$ $\mathbb{Z}$\textbf{[3]}
  \item getRestrictedAreas(): None $\rightarrow$ $\mathbb{Z}$\textbf{[ ]}\textbf{[3]}
\end{enumerate}

\section{MIS of WeatherHazardDetect} \label{weaather-haz}

The Weather Hazard Detection module is used to detect if the user is in a hazardous weather condition. The module will get the current weather conditions and future warnings based on the user's current location. The module will determine if there is incoming or present hazardous weather conditions based on the information accessed.

\subsection{Module}

\textbf{Short Name: WeatherHazDet}

\subsection{Uses}
\begin{itemize}
  \item \hyperref[rest-api]{RESTAPICommunication}
\end{itemize}

\subsection{Syntax}

\subsubsection{Exported Constants}
DETECTION\_RADIUS = 30 (Radius in kilometers to detect weather hazards)

\subsubsection{Exported Access Programs}

\begin{center}
  \begin{tabular}{p{2cm} p{4cm} p{4cm} p{2cm}}
    \hline
    \textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
    \hline
    checkWeatherHaz & None & str & - \\
    \hline
\end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

LAST\_UPDATE : $\mathbb{N}$ (Number of minutes passed since last time the weather data was updated)
CURR\_WEATHER : str (Current weather conditions)

\subsubsection{Environment Variables}

There are no environment variables for this module.

\subsubsection{Assumptions}

There are no assumptions for this module.

\subsubsection{Access Routine Semantics}

\noindent checkWeatherHaz():
\begin{itemize}
\item transition: No transition
\item output: Returns a string indicating the current weather conditions and any hazardous weather warnings.
\item exception: No exceptions
\end{itemize}

\subsubsection{Local Functions}

\begin{enumerate}
  \item getUserLocation: None $\rightarrow$ $\mathbb{Z}$\textbf{[3]}
  \item updateWeather: None $\rightarrow$ $\mathbb{B}$
  \item determineHaz: None $\rightarrow$ str
\end{enumerate}

\newpage

\bibliographystyle {plainnat}
\bibliography {../../../refs/References}

\section*{Appendix --- Reflection}

\begin{enumerate}
  \item What went well while writing this deliverable? \\ \\
        The modules were distributed relatively well according to what each group member seems most comfortable and experienced with. \\
  \item What pain points did you experience during this deliverable, and how
        did you resolve them?\\ \\
        Deciding the modules initially was a bit of a challenge, but after speaking with our TA, it helped us decide which modules to split and which ones to combine. \\
  \item Which of your design decisions stemmed from speaking to your client(s)
        or a proxy (e.g. your peers, stakeholders, potential users)? For those that
        were not, why, and where did they come from?\\ \\
        Our design decisions came as a natural consequence of our requirements, many of which did stem from speaking to clients.
        So while indirectly influenced, our design decisions were mostly made to be the easiest way to meet the requirements we set out. \\
  \item While creating the design doc, what parts of your other documents (e.g.
        requirements, hazard analysis, etc), it any, needed to be changed, and why?\\ \\
        We did not need to change any parts of other documents. \\

  \item What are the limitations of your solution?  Put another way, given
        unlimited resources, what could you do to make the project better? (LO\_ProbSolutions)\\ \\
        One of the key components of our design is the client server system for storing user data.
        If we had infinite resources, it would be beneficial to move more logic to the server to relieve the client from certain expensive computations.
        The reason our current design has them on the client side is to reduce the complexity of client server communication to simplify the implementation. \\

  \item Give a brief overview of other design solutions you considered.  What
        are the benefits and tradeoffs of those other designs compared with the chosen
        design?  From all the potential options, why did you select the documented design?
        (LO\_Explores)\\ \\
        In our initial solution, user content generation was meant to be internal, and more components were designed to be on the server. This design would have been ideal for users, and more maintainable in the long run, but came at an exorbiant cost for compute for object generation, and a complex design that would be infeasible to build in the alloted time.
        The driving force behind our changes since then were to make our app easier to implement, and less expensive to run. \\
\end{enumerate}


\end{document}